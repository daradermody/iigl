<div class="w3-padding-large" id="main">
  <div class="w3-padding-64 w3-content">
    <h2 class="page-heading">Tournaments</h2>

    <p>We use <i>join codes</i> for joining tournaments. Click one of the buttons below and input the generated code into the Battlefy tournament page.</p>

    <ng-template style="width: 100%;" #loading>
      <div class="text-center">
        <i class="fas fa-cog fa-5x fa-spin"></i>
      </div>
    </ng-template>

    <table class="table" *ngIf="tournaments; else loading">
      <thead>
      <tr>
        <th scope="col">Game</th>
        <th scope="col">Name</th>
        <th scope="col">Date</th>
        <th scope="col" class="d-none d-lg-table-cell">Type</th>
        <th scope="col" class="d-none d-lg-table-cell">Participants</th>
        <th scope="col">Codes</th>
      </tr>
      </thead>

      <tbody>
      <!--<tr *ngFor="let tournament of tournaments" (click)="open(tournament.url)">-->
      <tr *ngFor="let tournament of tournaments">
        <td>
          <img src="{{tournament.game.iconUrl}}">
          <span class="d-none d-md-inline">{{ tournament.game.name }}</span>
        </td>
        <td>{{ tournament.name }}</td>
        <td>
          <span class="d-none d-lg-inline">{{ tournament.start.format('Do MMMM') }}</span>
          <span class="d-inline d-lg-none">{{ tournament.start.format('Do MMM') }}</span>
        </td>
        <td class="d-none d-lg-table-cell">{{ tournament.type }}</td>
        <td class="d-none d-lg-table-cell">{{ tournament.teamsCount }}</td>
        <td>
          <code *ngIf="tournament.joinCode; else getCode">{{ tournament.joinCode }}</code>
          <ng-template #getCode><button (click)="getJoinCode(tournament)">Get code</button></ng-template>
        </td>
      </tr>

      </tbody>

    </table>
  </div>
</div>
